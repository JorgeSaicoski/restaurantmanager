{% extends 'staff/main.html' %}
{% load static %}

{% block content %}
  {% if is_weiter %}
    <h2>{{table}}</h2>
    <a href="{% url 'tables' restaurant.name %}">; Volver</a>
    {% for item in items %}
      <div>
        <p>{{item.name}}</p><button data-product="{{item.id}}" data-action="add" class="add-btn update-table">Pedir</button>
      </div>
    {% endfor %}
    {% for item in order.get_items %}
    <p>{{item.product_name}}</p>
      <div>
        <button type="button" name="remove" data-product="{{item.product_id}}" data-action="remove" class="update-table">-</button>
        <p>{{item.quantity}}</p>
        <button type="button" name="add" data-product="{{item.product_id}}" data-action="add" class="update-table">+</button>
      </div>
    {% endfor %}
    {% if order.get_items %}
      <button id="make-payment">realizar pedido</button>
    {% endif %}


    {% for order in orders_closed %}
    <p>Numero del pedido {{order.get_items.0.order_id}}</p>
      {% for i in order.get_items %}

        <p>{{i.quantity}} {{i.product_name}}</p>
        {% if i.complete %}
          {% if i.delivered %}
          <p>Ya fue entregado</p>
          {% else %}
          <p>Cocina he terminado</p>
          <button data-product="{{i.product_id}}" data-order="{{i.order_id}}" data-mode="item" class="btn-delivered">Entregar item</button>
          {% endif %}
        {% else %}
          <p>No esta listo.</p>
        {% endif %}
      {% endfor %}
      {% if order.is_finished %}
        <p>Completado y entregu√©</p>
      {% else %}
        <button data-product="1" data-order="{{order.get_items.0.order_id}}" data-mode="order" class="btn-delivered">Entregar el pedido</button>
      {% endif %}

    <hr>
    {% endfor %}
    <script type="text/javascript">
      let table = '{{table}}'
      console.log(table)
    </script>
    <script type="text/javascript" src="{% static 'js/table.js' %}"></script>
  {% endif %}
{% endblock content %}
